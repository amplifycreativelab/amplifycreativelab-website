---
import { Image } from "astro:assets";
import bobaPopImage from "../../assets/images/portfolio/websites/boba-pop-website-portfolio.webp";
import pulseForgeImage from "../../assets/images/portfolio/websites/pulse-forge-website-portfolio.webp";
import venueNightsImage from "../../assets/images/portfolio/websites/venue-nights-website-portfolio.webp";
import localTraderImage from "../../assets/images/portfolio/websites/local-trader-website-portfolio.webp";
import professionalServiceImage from "../../assets/images/portfolio/websites/professional-service-website-portfolio.webp";
import cafeRestaurantImage from "../../assets/images/portfolio/websites/cafe-restaurant-website-portfolio.webp";
import accommodationVenueImage from "../../assets/images/portfolio/websites/accommodation-venue-website-portfolio.webp";
import businessBrochureImage from "../../assets/images/portfolio/websites/business-brochure-website-portfolio.webp";
import pizzaTakeawayImage from "../../assets/images/portfolio/websites/pizza-takeaway-website-portfolio.webp";
import darkLuxeCraftImage from "../../assets/images/portfolio/websites/dark-luxe-craft-website-portfolio.webp";
import dropCultureImage from "../../assets/images/portfolio/websites/drop-culture-website-portfolio.webp";
import monoGridImage from "../../assets/images/portfolio/websites/perth-architect-portfolio-minimal-grid-design.webp";
import stillWaterImage from "../../assets/images/portfolio/websites/perth-health-wellness-clean-website-design.webp";
import wildTrackImage from "../../assets/images/portfolio/websites/perth-adventure-tourism-modern-website-design.webp";
import posterWaveImage from "../../assets/images/portfolio/websites/perth-creative-agency-bold-website-design.webp";
import playPatchImage from "../../assets/images/portfolio/websites/perth-childcare-education-playful-website-design.webp";
import sprintLaunchImage from "../../assets/images/portfolio/websites/perth-startup-landing-page-conversion-design.webp";
import holoStackImage from "../../assets/images/portfolio/websites/perth-tech-saas-modern-interface-design.webp";
import grandFunctionImage from "../../assets/images/portfolio/websites/perth-function-venue-event-website-design.webp";
import studioShowcaseImage from "../../assets/images/portfolio/websites/perth-creative-portfolio-showcase-website-design.webp";

const projects = [
    {
        title: "Lumina Stay",
        category: "Hospitality",
        description:
            "A boutique accommodation booking site. Features high-end room showcases, amenity highlights, and a seamless enquiry funnel.",
        link: "https://amplifycreativelab.github.io/demo-accomodation-venue/",
        color: "#18181B", // Zinc 900 / Luxurious Dark
        image: accommodationVenueImage,
    },
    {
        title: "PulseForge Gym",
        category: "Sole trader",
        description:
            "A high-octane fitness brand. Features kinetic typography, aggressive motion design, and a conversion-focused membership funnel.",
        link: "https://amplifycreativelab.github.io/demo-gym-pulse-force/",
        color: "#FF3366", // Cyber Red
        image: pulseForgeImage,
    },
    {
        title: "Boba Pop!",
        category: "Hospitality",
        description:
            "Perth's loudest boba brand. A high-voltage, sticker-aesthetic website featuring a custom menu builder and vibrant motion design.",
        link: "https://amplifycreativelab.github.io/demo-bubble-tea-boba-pop/",
        color: "#FF9F43", // Vibrant Pop Orange
        image: bobaPopImage,
    },
    {
        title: "QuickQuote Plumbing",
        category: "Sole trader",
        description:
            "A high-trust lead generation site for local tradies. Features instant quote forms, service area mapping, and mobile-first functional design.",
        link: "https://amplifycreativelab.github.io/demo-local-trader/",
        color: "#0284C7", // Trust Blue
        image: localTraderImage,
    },
    {
        title: "Venue Nights",
        category: "Hospitality",
        description:
            "A dark-mode, neon-accented nightlife website. Features event schedule integration, VIP booth booking system, and immersive atmosphere.",
        link: "https://amplifycreativelab.github.io/demo-night-venue/",
        color: "#6D28D9", // Deep Neon Purple
        image: venueNightsImage,
    },
    {
        title: "The Olive Branch",
        category: "Hospitality",
        description:
            "A warm, inviting restaurant website emphasizing seasonal menus and table bookings. Features rich imagery and an easy reservation flow.",
        link: "https://amplifycreativelab.github.io/demo-cafe-restaurant/",
        color: "#5B7553", // Olive Green
        image: cafeRestaurantImage,
    },
    {
        title: "Takeaway Express",
        category: "Hospitality",
        description:
            "A high-speed online ordering site for busy takeaway venues. Optimized for mobile, local SEO presence, and rapid conversion.",
        link: "https://amplifycreativelab.github.io/demo-pizza-tekeaway/",
        color: "#DC2626", // Red 600
        image: pizzaTakeawayImage,
    },
    {
        title: "Local Business Brochure",
        category: "Sole trader",
        description:
            "A clean, effective digital presence for local businesses. Highlights services, service areas, and clear calls to action to drive enquiries.",
        link: "https://amplifycreativelab.github.io/demo-business-brochure/",
        color: "#334155", // Slate Blue/Grey
        image: businessBrochureImage,
    },
    {
        title: "Modern Consultant",
        category: "Sole trader",
        description:
            "A clean, authority-building site for high-end consultants. Focuses on content hierarchy, service clarity, and trust signals.",
        link: "https://amplifycreativelab.github.io/demo-professional-service/",
        color: "#0F172A", // Slate Dark
        image: professionalServiceImage,
    },
    {
        title: "Ink Ritual",
        category: "Creative",
        description:
            "A premium dark-mode portfolio for a high-end tattoo studio. Minimalist, image-focused, and oozing with quiet luxury.",
        link: "https://amplifycreativelab.github.io/demo-dark-luxe-craft/",
        color: "#171717", // Neutral 900
        image: darkLuxeCraftImage,
    },
    {
        title: "DropCulture",
        category: "E-commerce",
        description:
            "A brutalist streetwear concept store. Features glitch aesthetics, editorial product grids, and a high-impact 'drop' countdown system.",
        link: "https://amplifycreativelab.github.io/demo-drop-culture/",
        color: "#000000", // Pure Black / Brutalist
        image: dropCultureImage,
    },
    {
        title: "Mono Grid",
        category: "Creative",
        description:
            "A structured, monochromatic portfolio for architects and designers. Focuses on visual hierarchy and grid precision.",
        link: "https://amplifycreativelab.github.io/demo-mono-grid/",
        color: "#1a1a1a",
        image: monoGridImage,
    },
    {
        title: "Still Water",
        category: "Sole trader",
        description:
            "A serene, calming interface for spas and therapy centers. Uses fluid typography and soft whitespace to build trust.",
        link: "https://amplifycreativelab.github.io/demo-still-water/",
        color: "#a6bfa5",
        image: stillWaterImage,
    },
    {
        title: "Wild Track",
        category: "Hospitality",
        description:
            "Rugged, immersive design for outdoor tour operators. Features full-screen imagery/video and bold typography.",
        link: "https://amplifycreativelab.github.io/demo-wild-track/",
        color: "#8b4513",
        image: wildTrackImage,
    },
    {
        title: "Poster Wave",
        category: "Creative",
        description:
            "A brutalist, poster-inspired layout for creative agencies. High impact, large typography, and scroll-triggered reveals.",
        link: "https://amplifycreativelab.github.io/demo-poster-wave/",
        color: "#3b82f6",
        image: posterWaveImage,
    },
    {
        title: "Play Patch",
        category: "Sole trader",
        description:
            "A playful, rounded aesthetic for childcare and early learning. Soft colours, organic shapes, and friendly UI elements.",
        link: "https://amplifycreativelab.github.io/demo-play-patch/",
        color: "#f472b6",
        image: playPatchImage,
    },
    {
        title: "Sprint Launch",
        category: "Tech",
        description:
            "A high-conversion single page landing site. Perfect for product launches, apps, or lead magnets.",
        link: "https://amplifycreativelab.github.io/demo-one-page-sprint/",
        color: "#6366f1",
        image: sprintLaunchImage,
    },
    {
        title: "Holo Stack",
        category: "Tech",
        description:
            "A modern, glassmorphism-inspired interface for tech companies. Clean, layered depth, and futuristic gradients.",
        link: "https://amplifycreativelab.github.io/demo-holo-stack/",
        color: "#0ea5e9",
        image: holoStackImage,
    },
    {
        title: "The Grand Function",
        category: "Hospitality",
        description:
            "Elegant and functional venue showcase. Virtual tour integration, capacity charts, and enquiry management.",
        link: "https://amplifycreativelab.github.io/demo-function-venue/",
        color: "#b45309",
        image: grandFunctionImage,
    },
    {
        title: "Studio Showcase",
        category: "Creative",
        description:
            "A minimalist, gallery-style showcase for designers and artists. Focuses on visual impact and simple navigation.",
        link: "https://amplifycreativelab.github.io/demo-creative-portfolio/",
        color: "#121212",
        image: studioShowcaseImage,
    },
];

const INITIAL_VISIBLE = 4;
const LOAD_MORE_STEP = 4;

const CATEGORY_ORDER = [
    "Hospitality",
    "Sole trader",
    "E-commerce",
    "Creative",
    "Tech",
] as const;
const categories = [
    "All",
    ...CATEGORY_ORDER.filter((category) =>
        projects.some((project) => project.category === category),
    ),
];
---

<section
    class="webdev-portfolio"
    data-initial-visible={INITIAL_VISIBLE}
    data-load-step={LOAD_MORE_STEP}
>
    <div class="webdev-portfolio__inner">
        <div class="webdev-portfolio__header">
            <h2 class="webdev-portfolio__title">Perth Website Design Demos</h2>
            <p class="webdev-portfolio__subtitle">
                Explore our latest high-performance concepts. Custom-built for
                <strong>Perth local SEO</strong>, lightning-fast speed, and
                maximum conversion.
            </p>
        </div>

        <div class="webdev-portfolio__controls">
            <label class="webdev-portfolio__filter-label" for="webdev-portfolio-filter"
                >Business type</label
            >
            <select
                id="webdev-portfolio-filter"
                class="webdev-portfolio__filter"
                aria-label="Filter website demos by business type"
            >
                {categories.map((c) => (
                    <option value={c}>{c}</option>
                ))}
            </select>
        </div>

        <div class="webdev-portfolio__grid">
            {
                projects.map((project, index) => (
                    <a
                        href={project.link}
                        class="portfolio-card"
                        target="_blank"
                        rel="noopener noreferrer"
                        data-category={project.category}
                        style={index >= INITIAL_VISIBLE ? "display:none" : ""}
                    >
                        <div
                            class="portfolio-card__image-container"
                            style={`background-color: ${project.color}`}
                        >
                            {project.image ? (
                                <Image
                                    src={project.image}
                                    alt={`Website design for ${project.title}`}
                                    class="portfolio-card__image"
                                    width={600}
                                    widths={[300, 450, 600, 900]}
                                    sizes="(max-width: 380px) 100vw, (max-width: 1024px) 50vw, (max-width: 1440px) 33vw, 25vw"
                                    loading="lazy"
                                    decoding="async"
                                />
                            ) : (
                                <div class="portfolio-card__placeholder">
                                    <span>{project.title}</span>
                                </div>
                            )}
                        </div>
                        <div class="portfolio-card__content">
                            <span class="portfolio-card__category">
                                {project.category}
                            </span>
                            <h3 class="portfolio-card__title">
                                {project.title}
                            </h3>
                            <p class="portfolio-card__desc">
                                {project.description}
                            </p>
                        </div>
                    </a>
                ))
            }
        </div>

        <div
            id="webdev-portfolio-load-more-wrap"
            class="webdev-portfolio__load-more"
            style={projects.length <= INITIAL_VISIBLE ? "display:none" : ""}
        >
            <button
                id="webdev-portfolio-load-more"
                type="button"
                class="webdev-portfolio__load-more-btn"
            >
                Load more websites
            </button>
        </div>
    </div>
</section>

<script>
    const section = document.querySelector(".webdev-portfolio");
    const filter = document.getElementById(
        "webdev-portfolio-filter",
    ) as HTMLSelectElement | null;
    const loadMoreBtn = document.getElementById(
        "webdev-portfolio-load-more",
    ) as HTMLButtonElement | null;
    const loadMoreWrap = document.getElementById(
        "webdev-portfolio-load-more-wrap",
    ) as HTMLElement | null;

    if (section && filter && loadMoreBtn && loadMoreWrap) {
        const initialVisible = parseInt(
            section.getAttribute("data-initial-visible") || "4",
            10,
        );
        const step = parseInt(section.getAttribute("data-load-step") || "4", 10);

        const cards = Array.from(
            section.querySelectorAll<HTMLElement>(".portfolio-card"),
        );

        let currentCategory = filter.value || "All";
        let visibleCount = initialVisible;

        function getFilteredCards() {
            return cards.filter((card) => {
                const category = card.dataset.category || "";
                return currentCategory === "All" || category === currentCategory;
            });
        }

        function render() {
            const filtered = getFilteredCards();

            cards.forEach((card) => {
                card.style.display = "none";
            });

            filtered.forEach((card, index) => {
                if (index < visibleCount) card.style.display = "";
            });

            loadMoreWrap.style.display =
                visibleCount >= filtered.length ? "none" : "";
        }

        filter.addEventListener("change", () => {
            currentCategory = filter.value || "All";
            visibleCount = initialVisible;
            render();
        });

        loadMoreBtn.addEventListener("click", () => {
            visibleCount += step;
            render();
        });

        render();
    }
</script>

<style>
    .webdev-portfolio {
        padding: 100px 24px;
        background-color: #152705;
        border-top: 1px solid rgba(250, 218, 184, 0.22);
        color: #fef8eb;
        width: 100%;
    }

    .webdev-portfolio__inner {
        max-width: 1800px; /* Increased for 4 columns */
        margin: 0 auto;
        padding: 0 40px;
    }

    .webdev-portfolio__header {
        max-width: 800px;
        margin: 0 auto 64px;
        text-align: center;
    }

    .webdev-portfolio__title {
        font-family: "Abril Fatface", serif;
        font-size: 48px;
        color: #fef8eb;
        margin-bottom: 24px;
        line-height: 1.1;
    }

    .webdev-portfolio__subtitle {
        font-family: "Darker Grotesque", sans-serif;
        font-size: 24px;
        color: rgba(254, 248, 235, 0.85);
        line-height: 1.4;
        max-width: 600px;
        margin: 0 auto;
    }

    .webdev-portfolio__subtitle strong {
        color: #fadab8;
        font-weight: 700;
    }

    .webdev-portfolio__controls {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 40px;
    }

    .webdev-portfolio__filter-label {
        font-family: "Montserrat", sans-serif;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: rgba(250, 218, 184, 0.92);
    }

    .webdev-portfolio__filter {
        padding: 10px 18px;
        font-family: "Montserrat", sans-serif;
        font-size: 0.85rem;
        font-weight: 600;
        line-height: 1;
        border-radius: 999px;
        border: 1px solid rgba(250, 218, 184, 0.5);
        background-color: transparent;
        color: #fef8eb;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .webdev-portfolio__filter:hover,
    .webdev-portfolio__filter:focus-visible {
        background-color: rgba(250, 218, 184, 0.12);
        border-color: rgba(250, 218, 184, 0.8);
    }

    .webdev-portfolio__filter:focus-visible {
        outline: 2px solid #fadab8;
        outline-offset: 3px;
    }

    .webdev-portfolio__filter option {
        color: #152705;
    }

    .webdev-portfolio__grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* 4 Columns on large screens */
        gap: 32px;
    }

    .portfolio-card {
        display: flex;
        flex-direction: column;
        text-decoration: none;
        color: inherit;
        cursor: pointer;
        transition: transform 0.4s ease;
    }

    .portfolio-card:hover {
        transform: translateY(-8px);
    }

    .portfolio-card__image-container {
        border-radius: 12px;
        overflow: hidden;
        aspect-ratio: 16/10;
        margin-bottom: 20px;
        background: #e3d4b4;
        position: relative;
        box-shadow: 0 4px 20px rgba(21, 39, 5, 0.08);
        transition: box-shadow 0.4s ease;
    }

    .portfolio-card:hover .portfolio-card__image-container {
        box-shadow: 0 12px 30px rgba(21, 39, 5, 0.12);
    }

    .portfolio-card__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s ease;
    }

    .portfolio-card:hover .portfolio-card__image {
        transform: scale(1.05);
    }

    .portfolio-card__placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: rgba(255, 255, 255, 0.9);
        font-family: "Abril Fatface", serif;
        font-size: 24px;
        text-align: center;
        padding: 20px;
    }

    .portfolio-card__content {
        display: flex;
        flex-direction: column;
    }

    .portfolio-card__category {
        font-family: "Darker Grotesque", sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 13px;
        color: rgba(250, 218, 184, 0.95);
        letter-spacing: 1.5px;
        margin-bottom: 6px;
    }

    .portfolio-card__title {
        font-family: "Abril Fatface", serif;
        font-size: 24px;
        color: #fef8eb;
        margin: 0 0 8px;
        line-height: 1.2;
    }

    .portfolio-card__desc {
        font-family: "Darker Grotesque", sans-serif;
        font-size: 17px;
        color: rgba(245, 234, 215, 0.92);
        line-height: 1.4;
    }

    .portfolio-card:focus-visible {
        outline: 2px solid #fadab8;
        outline-offset: 6px;
        border-radius: 12px;
    }

    .webdev-portfolio__load-more {
        margin-top: 48px;
        display: flex;
        justify-content: center;
    }

    .webdev-portfolio__load-more-btn {
        padding: 12px 22px;
        border-radius: 999px;
        border: 1px solid rgba(250, 218, 184, 0.7);
        background: rgba(254, 248, 235, 0.06);
        color: #fadab8;
        font-family: "Montserrat", sans-serif;
        font-size: 0.85rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        cursor: pointer;
        transition:
            transform 0.15s ease,
            background-color 0.15s ease,
            border-color 0.15s ease,
            color 0.15s ease;
    }

    .webdev-portfolio__load-more-btn:hover {
        transform: translateY(-1px);
        background: #fadab8;
        border-color: #fadab8;
        color: #152705;
    }

    .webdev-portfolio__load-more-btn:focus-visible {
        outline: 2px solid #fadab8;
        outline-offset: 3px;
    }

    @media (max-width: 1440px) {
        .webdev-portfolio__grid {
            grid-template-columns: repeat(
                3,
                1fr
            ); /* 3 columns on smaller desktops */
        }
    }

    @media (max-width: 1024px) {
        .webdev-portfolio__grid {
            grid-template-columns: repeat(2, 1fr); /* 2 columns on tablets */
        }

        .webdev-portfolio__inner {
            padding: 0 24px;
            max-width: 100%;
        }
    }

    @media (max-width: 768px) {
        .webdev-portfolio {
            padding: 40px 0;
        }

        .webdev-portfolio__inner {
            padding: 0 16px;
        }

        .webdev-portfolio__title {
            font-size: 32px;
            margin-bottom: 24px;
        }

        .webdev-portfolio__subtitle {
            font-size: 18px;
            margin-bottom: 32px;
        }

        /* 
           Force 2 columns on mobile. 
           Grid gap reduced to fit 2 items + padding comfortably.
        */
        .webdev-portfolio__grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 16px; /* Tight gap for mobile 2-col */
        }

        .portfolio-card__image-container {
            margin-bottom: 10px;
            /* Slightly taller ratio for mobile cards to look less squat */
            aspect-ratio: 4/3;
        }

        .portfolio-card__title {
            font-size: 18px; /* Further reduced */
            line-height: 1.1;
            margin-bottom: 4px;
        }

        .portfolio-card__category {
            font-size: 10px;
            margin-bottom: 2px;
            letter-spacing: 0.5px;
        }

        .portfolio-card__desc {
            font-size: 14px;
            line-height: 1.3;
            /* Clamp description to 3 lines to keep heights uniform-ish */
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    }

    /* Extra small screens (very narrow phones) -> back to 1 column */
    @media (max-width: 380px) {
        .webdev-portfolio__grid {
            grid-template-columns: 1fr;
        }

        .portfolio-card__image-container {
            aspect-ratio: 16/10;
        }
    }
</style>
